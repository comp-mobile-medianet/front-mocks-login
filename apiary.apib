FORMAT: 1A
HOST: http://www.google.com

# Login
JSON contracts between back and front end for login functionality

# Group LoginValidate

Login first step with nickname input

Form parameters:
<ul>
    <li>username</li>
    <li>rememberMe</li>
</ul>
    
_eventId:
<ul>
    <li>Submit: validateUser</li>
    <li>Forgot username: rememberUser</li>
</ul>

## Username validation [/pages/login/validate.json]
### Valid [GET]
+ Response 200 (application/json)

        {
            "alerts": null
        }

## Username validation with errors [/pages/login/validate.json?mockId=2]
### Error [GET]
+ Response 200 (application/json)

        {
            "alerts": [
                {
                    "type": "ERROR",
                    "alert": [
                        {
                            "text": "Error message 1",
                            "field": ""
                        }
                    ]
                }
            ]
        }
        

# Group LoginChallenge

Login second step (optional, just if device is not recognized) with security answer input

Form parameters:
<ul>
    <li>securityAnswer</li>
    <li>rememberDevice</li>
</ul>
    
_eventId: validateQuestion

## First access [/pages/login/challenge.json]
### Challenge [GET]
+ Response 200 (application/json)

        {
            "alerts": null,
            "pageContent": {
                "securityQuestion": "What was the name of your first pet?"
            }
        }

## Security answer error [/pages/login/challenge.json?mockId=2]
### Challenge [GET]
+ Response 200 (application/json)

        {
            "alerts": [
                {
                    "type": "ERROR",
                    "alert": [
                        {
                            "text": "Wrong answer. Verify it and try again.",
                            "field": ""
                        }
                    ]
                }
            ],
            "pageContent": {
                "securityQuestion": "What was the name of your first pet?"
            }
        }

# Group LoginPassword

Login third step with password input

Form parameters:
<ul>
    <li>password</li>
</ul>
    
_eventId:
<ul>
    <li>Submit: validatePassword</li>
    <li>Forgot password: rememberPassword</li>
</ul>

## First acces [/pages/login/password.json]
### Password [GET]
+ Response 200 (application/json)

        {
            "alerts": null,
            "pageContent": null
        }

## Wrong password [/pages/login/password.json?mockId=2]
### Password [GET]
+ Response 200 (application/json)

        {
            "alerts": [
                {
                    "type": "ERROR",
                    "alert": [
                        {
                            "text": "Wrong password. Verify it and try again.",
                            "field": ""
                        }
                    ]
                }
            ],
            "pageContent": null
        }

## Remembered user [/pages/login/password.json?mockId=3]
### Password [GET]
+ Response 200 (application/json)

        {
            "alerts": null,
            "pageContent": {
                "remembered": true,
                "nickname": "Marcos Manuel",
                "lastSignonDate": "Wednesday 03/12/2014"
            }
        }


# Group LoginKnownUser

Login first step if user selected to remember him in a previous access

Form parameters: -

_eventId: validateUser

## Access [/pages/login/knownUser.json]
### Known User [GET]
+ Response 200 (application/json)

        {
            "alerts": null,
            "pageContent": {
                "nickname": "Marcos Manuel",
                "lastSignonDate": "Wednesday 03/12/2014"
            }
        }


# Group LoginTermsAndConditions

Login last step (optional, if user didn't accept the lastest T&C) with Terms and Conditions acceptance.

Form parameters:
<ul>
    <li>validateTerms</li>
    <li>declineTerms</li>
</ul>
    
_eventId: validateTerms

## Access [/pages/login/termsAndConditions.json]
### Terms and conditions [GET]
+ Response 200 (application/json)

        {
            "alerts": null
        }


# Group Nickname Account

User's nickname recovery first step

Form parameters:
<ul>
    <li>accountNumber</li>
    <li>email</li>
</ul>
    
_eventId: validateAccount

## First access [/pages/login/nicknameAccount.json]
### Challenge [GET]
+ Response 200 (application/json)

        {
            "alerts": null,
            "pageContent": {
            }
        }

# Group Recovery Challenge

User's nickname recovery second step

Form parameters:
<ul>
    <li>securityAnswer</li>
</ul>
    
_eventId: validateQuestion

## First access [/api/login/recoveryChallenge.json]
### Challenge [GET]
+ Response 200 (application/json)

        {
            "status": "OK",
            "pageContent": {
            },
            "flowExecutionUrl": "/index.html"
        }

## Wrong answer [/pages/login/recoveryChallenge.json?mockId=2]
### Wrong answer [GET]
+ Response 200 (application/json)

        {
            "header": {
                "title": "Forgot username"
            },
            "alerts": [
                {
                    "type": "ERROR",
                    "alert": [
                        {
                            "text": "Wrong answer. Verify it and try again.",
                            "field": ""
                        }
                    ]
                }
            ],
            "pageContent": {
                "securityQuestion": "What was the name of your first pet?"
            }
        }

# Group Password Account

User's password recovery first step

Form parameters:
<ul>
    <li>accountNumber</li>
</ul>
    
_eventId: validateAccount

## First access [/pages/login/passwordAccount.json]
### Challenge [GET]
+ Response 200 (application/json)

        {
            "alerts": null,
            "pageContent": {
            }
        }


# Group Change Password

Change the user's password

Form parameters:
<ul>
   <li>currentPassword</li>
   <li>newPassword</li>
   <li>confirmPassword</li>
</ul>

    
_eventId: confirmsChangePassword

## First access [/pages/login/changePassword.json]
### Challenge [GET]
+ Response 200 (application/json)

        {
            "alerts": [
                {
                    "type": "WARN",
                    "alert": [
                        {
                            "text": "You must change your password in order to continue. To change your password, enter your current password, and then enter and confirm your new password.",
                            "field": ""
                        }
                    ]
                }
            ],
            "pageContent": {
            }
        }

# Group Enrollment

Shows the enrollment form

Form parameters:
<ul>
   <li>accountNumber</li>
   <li>pin</li>
   <li>username</li>
   <li>password</li>
   <li>passwordConfirm</li>
   <li>email</li>
   <li>emailConfirm</li>
</ul>

    
_eventId: activateUser

## Correct answer [/pages/login/enrollment.json]
### Activate [GET]
+ Response 200 (application/json)

        {
            "alerts": null, 
            "pageContent": null,
            "flowExecutionUrl": "/api/login/activateUser.json?mockId=2&_eventId=activateUser"
        }

# Group User activation

Activate the user for enrollment

Form parameters:
<ul>
   <li>accountNumber</li>
   <li>pin</li>
   <li>username</li>
   <li>password</li>
   <li>passwordConfirm</li>
   <li>email</li>
   <li>emailConfirm</li>
</ul>
    
_eventId: enroll

## Correct answer [/api/login/activateUser.json]
### Activate [GET]
+ Response 200 (application/json)

        {
            "alerts": [
                {
                    "type": "INFO",
                    "alert": [
                        {
                            "text": "Nickname activate",
                            "field": "username"
                        }
                    ]
                }
            ],
            "status": "OK",
            "flowExecutionUrl": "/api/login/activateUser.json?mockId=3&_eventId=enroll",
            "pageContent": {
                "challengeQuestions":[
                   {
                      "questionId":"Q1.14",
                      "questionText":"What was the name of your junior high school?"
                   },
                   {
                      "questionId":"Q1.17",
                      "questionText":"What was your first car?"
                   },
                   {
                      "questionId":"Q1.24",
                      "questionText":"What town did you meet your spouse in for the first time?"
                   },
                   {
                      "questionId":"Q1.21",
                      "questionText":"What town did your maternal grandmother live in?"
                   },
                   {
                      "questionId":"Q1.22",
                      "questionText":"What is the middle name of your best friend?"
                   },
                   {
                      "questionId":"Q1.19",
                      "questionText":"What was the name of your elementary school?"
                   },
                   {
                      "questionId":"Q1.16",
                      "questionText":"What was the first name of your first manager?"
                   },
                   {
                      "questionId":"Q1.15",
                      "questionText":"What was the name of the first company you worked for?"
                   },
                   {
                      "questionId":"Q1.20",
                      "questionText":"What was your childhood nickname?"
                   },
                   {
                      "questionId":"Q1.18",
                      "questionText":"What was the year and make of your first car?"
                   },
                   {
                      "questionId":"Q1.13",
                      "questionText":"What was the name of your first pet?"
                   },
                   {
                      "questionId":"Q1.23",
                      "questionText":"What is the first name of your first college roommate?"
                   }
                ]
            }
        }

## Wrong pin [/api/login/activateUser.json?mockId=2]
### Error [GET]
+ Response 200 (application/json)

        {
            "alerts": [
                {
                    "type": "ERROR",
                    "alert": [
                        {
                            "text": "Wrong Pin",
                            "field": "pin"
                        }
                    ]
                }
            ],
            "flowExecutionUrl": "/api/login/activateUser.json?execution=1",
            "status": "ERROR",
            "pageContent": null
        }

## Enroll ok [/api/login/activateUser.json?mockId=3]
### Error [GET]
+ Response 200 (application/json)

        {
            "alerts": [
                {
                    "type": "INFO",
                    "alert": [
                        {
                            "text": "Enroll Ok"
                        }
                    ]
                }
            ],
            "status": "OK",
            "flowExecutionUrl": "/accounts.html?execution=1",
            "pageContent": null
        }

# Group UncompleteEnrollment

Shows the uncompleteEnrollment form

Form parameters:
<ul>
   <li>questionId (list)</li>
   <li>answerText (list)</li>
</ul>
    
## Correct answer [/pages/login/uncompleteEnrollment.json]
### Activate [GET]
+ Response 200 (application/json)

        {
            "alerts": null, 
            "pageContent": {
                "challengeQuestions":[
                   {
                      "questionId":"Q1.14",
                      "questionText":"What was the name of your junior high school?"
                   },
                   {
                      "questionId":"Q1.17",
                      "questionText":"What was your first car?"
                   },
                   {
                      "questionId":"Q1.24",
                      "questionText":"What town did you meet your spouse in for the first time?"
                   },
                   {
                      "questionId":"Q1.21",
                      "questionText":"What town did your maternal grandmother live in?"
                   },
                   {
                      "questionId":"Q1.22",
                      "questionText":"What is the middle name of your best friend?"
                   },
                   {
                      "questionId":"Q1.19",
                      "questionText":"What was the name of your elementary school?"
                   },
                   {
                      "questionId":"Q1.16",
                      "questionText":"What was the first name of your first manager?"
                   },
                   {
                      "questionId":"Q1.15",
                      "questionText":"What was the name of the first company you worked for?"
                   },
                   {
                      "questionId":"Q1.20",
                      "questionText":"What was your childhood nickname?"
                   },
                   {
                      "questionId":"Q1.18",
                      "questionText":"What was the year and make of your first car?"
                   },
                   {
                      "questionId":"Q1.13",
                      "questionText":"What was the name of your first pet?"
                   },
                   {
                      "questionId":"Q1.23",
                      "questionText":"What is the first name of your first college roommate?"
                   }
                ]
            },
            "flowExecutionUrl": "/api/login/activateUser.json?mockId=3&_eventId=enroll"
        }

        
# Group Enroll user

Enrolls the user in online banking

Form parameters:
<ul>
   <li>username</li>
   <li>password</li>
   <li>passwordConfirm</li>
   <li>email</li>
   <li>emailConfirm</li>
   <li>questionId (list)</li>
   <li>answerText (list)</li>

</ul>

_eventId: signIn

## Correct answer [/api/login/enroll.json]
### Enroll [GET]
+ Response 200 (application/json)

        {
            "alerts": null,
            "status": "OK",
            "flowExecutionUrl": "/login/termsAndConditions.html?execution=1",
            "pageContent": null
        }

# Group Recovery Nickname

User's nickname recovery first step

Form parameters:
<ul>
    <li>email</li>
    <li>accountNumber</li>
</ul>
    
_eventId: validateAccount

## First access [/pages/login/recoveryNickname.json]
### Challenge [GET]
+ Response 200 (application/json)

        {
            "alerts": null,
            "pageContent": {
            },
            "flowExecutionUrl": "/api/login/validateQuestion.json?mockId=2"
        }
        
# Group Recovery Password

User's nickname recovery first step

Form parameters:
<ul>
    <li>username</li>
</ul>
    
_eventId: validateUsername

## First access [/pages/login/recoveryPassword.json]
### Challenge [GET]
+ Response 200 (application/json)

        {
            "alerts": null,
            "pageContent": {
            },
            "flowExecutionUrl": "/api/login/recoveryPasswordUsername.json?mockId=2"
        }


## Second access [/api/login/recoveryPasswordUsername.json]
### Challenge [GET]
+ Response 200 (application/json)

        {
            "status": "OK",
            "pageContent": {
                "securityQuestion": "What was the name of your first pet?"
            },
            "flowExecutionUrl": "/api/login/validateQuestion.json?mockId=2"
        }

## Third access [/api/login/validateQuestion.json]
### Challenge [GET]
+ Response 200 (application/json)

        {
            "status": "OK",
            "pageContent": {
            },
            "flowExecutionUrl": "/api/login/recoveryChallenge.json?mockId=2"
        }
